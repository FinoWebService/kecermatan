<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>CAT Kecermatan</title>

<link rel="stylesheet" href="style.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

</head>

<body>

<!-- LOGIN -->
<div class="auth-container" id="loginPage">
   <div class="auth-box">
      <h2>Login</h2>
      <p>Masuk ke akun kamu</p>
      
      <input type="text" id="loginUsername" placeholder="Username">
      <input type="password" id="loginPassword" placeholder="Password">
      
      <button onclick="login()">LOGIN</button>
      
      <p class="switch-auth">
         Belum punya akun? <a href="#" onclick="showRegister()">Buat akun</a>
      </p>
   </div>
</div>


<!-- REGISTER -->
<div class="auth-container" id="registerPage" style="display:none;">
   <div class="auth-box">
      <h2>Daftar Akun Baru</h2>
      <p>Buat akun untuk menyimpan riwayat tes kamu</p>
      
      <input type="text" id="regUsername" placeholder="Username (min 4 karakter)">
      <input type="text" id="regNamaLengkap" placeholder="Nama Lengkap">
      <input type="password" id="regPassword" placeholder="Password (min 6 karakter)">
      <input type="password" id="regPasswordConfirm" placeholder="Konfirmasi Password">
      
      <button onclick="register()">DAFTAR</button>
      
      <p class="switch-auth">
         Sudah punya akun? <a href="#" onclick="showLogin()">Login di sini</a>
      </p>
   </div>
</div>


<!-- DASHBOARD -->
<div class="dashboard" id="dashboard" style="display:none;">
   
   <div class="dashboard-header">
      <h2>Dashboard</h2>
      <div class="user-info">
         <span id="dashUserName"></span>
         <button onclick="logout()" class="btn-logout">Logout</button>
      </div>
   </div>
   
   <div class="dashboard-content">
      
      <div class="card">
         <h3>Mulai Tes Baru</h3>
         <p>Uji kecermatan dan fokus kamu!</p>
         <button onclick="startExam()" class="btn-primary">MULAI TES</button>
      </div>
      
      <div class="card">
         <h3>üìä Statistik Kamu</h3>
         <div id="statsContent">
            <div class="stats-grid">
               <div class="stat-item">
                  <div class="stat-number" id="totalTests">0</div>
                  <div class="stat-label">Total Tes</div>
               </div>
               <div class="stat-item">
                  <div class="stat-number" id="avgScore">0</div>
                  <div class="stat-label">Rata-rata Nilai</div>
               </div>
               <div class="stat-item">
                  <div class="stat-number" id="bestScore">0</div>
                  <div class="stat-label">Nilai Tertinggi</div>
               </div>
               <div class="stat-item">
                  <div class="stat-number" id="lastScore">-</div>
                  <div class="stat-label">Tes Terakhir</div>
               </div>
            </div>
            <div class="chart-container">
               <canvas id="scoreChart"></canvas>
            </div>
         </div>
      </div>
      
      <div class="card">
         <h3>üèÜ Badge & Pencapaian</h3>
         <div id="badgesContent" class="badges-grid">
            <!-- Badges will be rendered here -->
         </div>
      </div>
      
      <div class="card">
         <h3>Riwayat Tes</h3>
         <div id="historyList">
            <p class="loading">Memuat riwayat...</p>
         </div>
      </div>
      
   </div>
   
</div>


<!-- UJIAN -->
<div class="wrapper" id="exam" style="display:none;">

<div class="exam-header-bar">
   <div id="userName"></div>
   <button onclick="backToDashboard()" class="btn-back">Kembali ke Dashboard</button>
</div>

<div class="header">

    <div class="title-box">
        Tahap Ujian :
        <b>KECERMATAN</b>
    </div>

    <div class="timer-box">
        <span>Sisa Waktu</span>
        <div id="timer">01:00</div>
    </div>

</div>

<div class="main">

    <div id="stageInfo"></div>

    <div class="mapping" id="mapping"></div>

    <div class="question-box" id="question"></div>

    <div class="answer-box" id="buttons"></div>

    <div class="info">
        Soal: <span id="count">0</span>/50
    </div>

    <div id="result"></div>

</div>

</div>


<script type="module" src="script.js"></script>


</body>
</html>